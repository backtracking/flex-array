<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Flex_array (flex-array.Flex_array)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">flex-array</a> &#x00BB; Flex_array</nav><h1>Module <code>Flex_array</code></h1><p>Flexible arrays.</p><p>Flexible arrays are arrays whose size can be changed by adding or removing elements at either end (one at a time).</p><p>This is an implementation of flexible arrays using Braun trees, following</p><p>Rob Hoogerwoord A logarithmic implementation of flexible arrays http://alexandria.tue.nl/repository/notdare/772185.pdf</p><p>All operations (<code>get</code>, <code>set</code>, <code>cons</code>, <code>tail</code>, <code>snoc</code>, <code>liat</code>) have logarithmic time complexity and logarithmic stack space.</p><nav class="toc"><ul><li><a href="#iterators">Iterators</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>+'a t</span></code></dt><dd><p>The type of flexible arrays. This is an immutable data structure. Values of type <code>'a t</code> can be compared using structural equality <code>=</code> (provided the elements of type <code>'a</code> can).</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>make n v</code> returns a flexible array of size <code>n</code>, initialized with <code>v</code>. All the elements of this new array are physically equal to <code>v</code> (in the sense of the <code>==</code> predicate). Time complexity O(log n).</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : int <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>init n f</code> returns a flexible array of size <code>n</code>, with elements <code>f 0, f 1, ..., f (n-1)</code>. Time complexity O(n). Caveat: function <code>f</code> is applied only once per index, but not in increasing order of indices.</p></dd></dl><dl><dt class="spec value" id="val-of_array"><a href="#val-of_array" class="anchor"></a><code><span class="keyword">val</span> of_array : <span><span class="type-var">'a</span> array</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>of_array a</code> returns a flexible array of size <code>List.length l</code>, with the elements of <code>l</code> in order. Time complexity O(n). Merely a shortcut built over <code>init</code>.</p></dd></dl><dl><dt class="spec value" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span class="keyword">val</span> of_list : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>of_list l</code> returns a flexible array of size <code>List.length l</code>, with the elements of <code>l</code> in order. Time complexity O(n). Logarithmic stack space.</p></dd></dl><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p>Time complexity O(1).</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>get a i</code> returns the element at index <code>i</code> in array <code>a</code>. The first element has index 0. Raises <code>Invalid_argument</code> if <code>i</code> is outside the range 0 to <code>length a - 1</code>.</p></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val</span> set : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>set a i v</code> returns a new array with all elements are identical to those of <code>a</code>, except at index <code>i</code> where the element is <code>v</code>. Raises <code>Invalid_argument</code> if <code>i</code> is outside the range 0 to <code>length a - 1</code>.</p></dd></dl><dl><dt class="spec value" id="val-cons"><a href="#val-cons" class="anchor"></a><code><span class="keyword">val</span> cons : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>cons v a</code> returns a new array obtained by appending the value <code>v</code> at the front of array <code>a</code>.</p></dd></dl><dl><dt class="spec value" id="val-tail"><a href="#val-tail" class="anchor"></a><code><span class="keyword">val</span> tail : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>tail a</code> returns a new array obtained by removing the value at the front of array <code>a</code>. Raises <code>Invalid_argument</code> if <code>a</code> has length 0.</p></dd></dl><dl><dt class="spec value" id="val-snoc"><a href="#val-snoc" class="anchor"></a><code><span class="keyword">val</span> snoc : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>snoc v a</code> returns a new array obtained by appending the value <code>v</code> at the end of array <code>a</code>.</p></dd></dl><dl><dt class="spec value" id="val-liat"><a href="#val-liat" class="anchor"></a><code><span class="keyword">val</span> liat : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>liat a</code> returns a new array obtained by removing the value at the end of array <code>a</code>. Raises <code>Invalid_argument</code> if <code>a</code> has length 0.</p></dd></dl><section><header><h2 id="iterators"><a href="#iterators" class="anchor"></a>Iterators</h2></header><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter f a</code> applies function <code>f</code> in turn to all the elements of <code>a</code>. It is equivalent to <code>f (get a 0); f (get a 1); ...;
    f (get a (n - 1); ()</code> where <code>n</code> is the length of the array <code>a</code>, but runs faster. Time complexity O(n). Space complexity O(n). Constant stack space.</p></dd></dl><dl><dt class="spec value" id="val-iteri"><a href="#val-iteri" class="anchor"></a><code><span class="keyword">val</span> iteri : <span>(int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Same as <a href="index.html#val-iter"><code>iter</code></a>, but the function is applied with the index of the element as first argument, and the element itself as second argument.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold f x a</code> computes <code>f (... (f (f x (get a 0)) (get a 1)) ...) (get a (n-1))</code>, where <code>n</code> is the length of the array <code>a</code>, but runs faster. Time complexity O(n). Space complexity O(n). Constant stack space.</p></dd></dl><dl><dt class="spec value" id="val-foldi"><a href="#val-foldi" class="anchor"></a><code><span class="keyword">val</span> foldi : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Same as <a href="index.html#val-fold"><code>fold</code></a>, but the function is applied with the index of the element as second argument.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>map f a</code> returns a new flexible array with elements <code>f (get a 0), ...,
    f (get a (n-1)</code> where <code>n</code> is the length of <code>a</code>.</p></dd></dl></section></div></body></html>